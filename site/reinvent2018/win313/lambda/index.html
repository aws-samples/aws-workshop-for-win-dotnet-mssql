



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="A collection of Windows on AWS workshops">
      
      
        <link rel="canonical" href="https://awsentworkshops.com/reinvent2018/win313/lambda/">
      
      
        <meta name="author" content="aws-ent-workshops@amazon.com">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/aws-favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.1.1">
    
    
      
        <title>AWS Lambda - Windows on AWS Workshops</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.3020aac5.css">
      
      
    
    
      <script src="../../../assets/javascripts/modernizr.01ccdecf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../../stylesheets/custom.css">
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#deploy-aws-lambda-with-azure-devops-vsts" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <!--
  Copyright (c) 2016-2018 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Application header -->
<header class="md-header" data-md-component="header">

    <!-- Top-level navigation -->
    <nav class="md-header-nav md-grid">
      <div class="md-flex">
  
        <!-- Link to home -->
        <div class="md-flex__cell md-flex__cell--shrink">
          <a href="https://aws.amazon.com/"
              title="Amazon Web Services"
              class="md-header-nav__button md-logo">
            
              <img src="../../../assets/images/aws_smile_logo.png" width="40" height="24" />
            
          </a>
        </div>
  
        <!-- Button to toggle drawer -->
        <div class="md-flex__cell md-flex__cell--shrink">
          <label class="md-icon md-icon--menu md-header-nav__button"
              for="__drawer"></label>
        </div>
  
        <!-- Header title -->
        <div class="md-flex__cell md-flex__cell--stretch">
          <div class="md-flex__ellipsis md-header-nav__title"
              data-md-component="title">
            
              
                <span class="md-header-nav__topic">
                  Windows on AWS Workshops
                </span>
                <span class="md-header-nav__topic">
                  AWS Lambda
                </span>
              
            
          </div>
        </div>
  
        <!-- Button to open search dialogue -->
        <div class="md-flex__cell md-flex__cell--shrink">
          
            
              <label class="md-icon md-icon--search md-header-nav__button"
                  for="__search"></label>
  
              <!-- Search interface -->
              
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
            
          
        </div>
        
        <!-- Repository containing source -->
        
        <div class="md-flex__cell md-flex__cell--shrink">
            <div class="md-header-nav__lang">
                <div class="md-lang-drop">
                    <button onmouseover="langToggle()" class="md-lang-dropbtn fa fa-globe"></button>
                </div>
            </div>
        </div>

        <!-- Repository containing source -->
        
          <div class="md-flex__cell md-flex__cell--shrink">
            <div class="md-header-nav__source">
              


  

<a href="https://github.com/aws-samples/aws-workshop-for-win-dotnet-mssql/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    aws-samples/aws-workshop-for-win-dotnet-mssql
  </div>
</a>
            </div>
          </div>
        
      </div>
    </nav>
  </header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../../.." title="Home" class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../index2018/" title="re:Invent 2018" class="md-tabs__link md-tabs__link--active">
          re:Invent 2018
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../reinvent2019/index2019/" title="re:Invent 2019" class="md-tabs__link">
          re:Invent 2019
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../builder-sessions/" title="Builder Sessions" class="md-tabs__link">
          Builder Sessions
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../workshops/" title="Full Day Workshops" class="md-tabs__link">
          Full Day Workshops
        </a>
      
    </li>
  

      
        
      
        
      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://awsentworkshops.com" title="Windows on AWS Workshops" class="md-nav__button md-logo">
      
        <img src="../../../assets/images/aws_smile_logo.png" width="48" height="48">
      
    </a>
    Windows on AWS Workshops
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/aws-samples/aws-workshop-for-win-dotnet-mssql/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    aws-samples/aws-workshop-for-win-dotnet-mssql
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../getting-started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      re:Invent 2018
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        re:Invent 2018
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../index2018/" title="Directory" class="md-nav__link">
      Directory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      Win319
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        Win319
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../win319/win319index/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../win319/prereq/" title="Pre-Requisite" class="md-nav__link">
      Pre-Requisite
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../win319/1_DeployAd/" title="Create Directory" class="md-nav__link">
      Create Directory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../win319/2_DeployMad/" title="Deploy Managed AD" class="md-nav__link">
      Deploy Managed AD
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../win319/3_Trust/" title="Create Domain Trust" class="md-nav__link">
      Create Domain Trust
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../win319/4_Createorg/" title="Create AWS Organization" class="md-nav__link">
      Create AWS Organization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../win319/5_ConnectADtoSSO/" title="Connect AD to SSO" class="md-nav__link">
      Connect AD to SSO
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../win319/6_VerifyADSSO_MAD/" title="Verify SSO" class="md-nav__link">
      Verify SSO
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3" type="checkbox" id="nav-3-3" checked>
    
    <label class="md-nav__link" for="nav-3-3">
      Win313
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-3">
        Win313
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../win313index/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../setup/" title="Lab Setup" class="md-nav__link">
      Lab Setup
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3-3" type="checkbox" id="nav-3-3-3" checked>
    
    <label class="md-nav__link" for="nav-3-3-3">
      Challenges
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-3-3">
        Challenges
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../ec2/" title="Amazon EC2" class="md-nav__link">
      Amazon EC2
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        AWS Lambda
      </label>
    
    <a href="./" title="AWS Lambda" class="md-nav__link md-nav__link--active">
      AWS Lambda
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" title="Prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-an-iam-role-for-your-lambda-function" title="Create an IAM Role for your Lambda Function" class="md-nav__link">
    Create an IAM Role for your Lambda Function
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-azure-devops-project" title="Create Azure DevOps project" class="md-nav__link">
    Create Azure DevOps project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-simple-lambda-project" title="Create a simple Lambda project" class="md-nav__link">
    Create a simple Lambda project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-build-pipeline" title="Create Build pipeline" class="md-nav__link">
    Create Build pipeline
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-release-pipeline" title="Create Release pipeline" class="md-nav__link">
    Create Release pipeline
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-the-function-using-net-cli" title="Testing the function using .net CLI" class="md-nav__link">
    Testing the function using .net CLI
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../fargate/" title="Amazon ECS Fargate" class="md-nav__link">
      Amazon ECS Fargate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../resources/" title="Resources" class="md-nav__link">
      Resources
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-4" type="checkbox" id="nav-3-4">
    
    <label class="md-nav__link" for="nav-3-4">
      Win308
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-4">
        Win308
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../win308/win308index/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../win308/prereq/" title="Pre-requisites" class="md-nav__link">
      Pre-requisites
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-4-3" type="checkbox" id="nav-3-4-3">
    
    <label class="md-nav__link" for="nav-3-4-3">
      Challenges
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-4-3">
        Challenges
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../win308/challenge1/" title="Challenge 1 Configuring resources using AWS Tools for Windows PowerShell" class="md-nav__link">
      Challenge 1 Configuring resources using AWS Tools for Windows PowerShell
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../win308/challenge2/" title="Challenge 2 Configure EC2 instances using Powershell and SSM" class="md-nav__link">
      Challenge 2 Configure EC2 instances using Powershell and SSM
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-5" type="checkbox" id="nav-3-5">
    
    <label class="md-nav__link" for="nav-3-5">
      Win309
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-5">
        Win309
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../win309/win309index/" title="Home" class="md-nav__link">
      Home
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../win309/prereq/" title="Prerequisites" class="md-nav__link">
      Prerequisites
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../win309/resources/" title="Lab Guide" class="md-nav__link">
      Lab Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-6" type="checkbox" id="nav-3-6">
    
    <label class="md-nav__link" for="nav-3-6">
      Win314
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-6">
        Win314
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../win314/win314index/" title="Home" class="md-nav__link">
      Home
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../win314/build/" title="Let's Build" class="md-nav__link">
      Let's Build
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-7" type="checkbox" id="nav-3-7">
    
    <label class="md-nav__link" for="nav-3-7">
      Win310
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-7">
        Win310
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../win310/win310index/" title="Home" class="md-nav__link">
      Home
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../win310/scenario/" title="Scenario" class="md-nav__link">
      Scenario
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../win310/rehost/" title="Rehost" class="md-nav__link">
      Rehost
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../win310/replatform/" title="Replatform" class="md-nav__link">
      Replatform
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../win310/refactor/" title="Refactor" class="md-nav__link">
      Refactor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../win310/bonus/" title="Bonus" class="md-nav__link">
      Bonus
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-8" type="checkbox" id="nav-3-8">
    
    <label class="md-nav__link" for="nav-3-8">
      Dev334
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-8">
        Dev334
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../dev334/dev334index/" title="Home" class="md-nav__link">
      Home
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dev334/prereq/" title="Prerequisites" class="md-nav__link">
      Prerequisites
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dev334/resources/" title="Resources" class="md-nav__link">
      Resources
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-8-4" type="checkbox" id="nav-3-8-4">
    
    <label class="md-nav__link" for="nav-3-8-4">
      Challenges
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-8-4">
        Challenges
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../dev334/challenge1/" title="Powershell exercise" class="md-nav__link">
      Powershell exercise
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      re:Invent 2019
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        re:Invent 2019
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reinvent2019/index2019/" title="Directory" class="md-nav__link">
      Directory
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Builder Sessions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Builder Sessions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../builder-sessions/" title="Directory" class="md-nav__link">
      Directory
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Full Day Workshops
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Full Day Workshops
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../workshops/" title="Directory" class="md-nav__link">
      Directory
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../contribute/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" title="Prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-an-iam-role-for-your-lambda-function" title="Create an IAM Role for your Lambda Function" class="md-nav__link">
    Create an IAM Role for your Lambda Function
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-azure-devops-project" title="Create Azure DevOps project" class="md-nav__link">
    Create Azure DevOps project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-simple-lambda-project" title="Create a simple Lambda project" class="md-nav__link">
    Create a simple Lambda project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-build-pipeline" title="Create Build pipeline" class="md-nav__link">
    Create Build pipeline
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-release-pipeline" title="Create Release pipeline" class="md-nav__link">
    Create Release pipeline
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-the-function-using-net-cli" title="Testing the function using .net CLI" class="md-nav__link">
    Testing the function using .net CLI
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/aws-samples/aws-workshop-for-win-dotnet-mssql/edit/master/docs/reinvent2018/win313/lambda.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="deploy-aws-lambda-with-azure-devops-vsts">Deploy AWS Lambda with Azure DevOps (VSTS)</h1>
<h2 id="introduction">Introduction</h2>
<blockquote>
<p>In this lab, you will learn how to use Azure DevOps and AWS VSTS tool to deploy AWS Lambda project.  </p>
</blockquote>
<h2 id="prerequisites">Prerequisites</h2>
<ol>
<li>Complete the <a href="../setup/">Lab Setup</a>.</li>
<li>Create an <strong>IAM User</strong> using the AWS Management Console, as <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_users_create.html#id_users_create_console">described here.</a></li>
<li>Create an <strong>Access Key</strong> for the IAM User by following  <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html#Using_CreateAccessKey">these instructions</a>.</li>
<li>You will need the <strong>AWS CLI</strong> installed and configured. If you don't already have it you can follow <a href="https://docs.aws.amazon.com/lambda/latest/dg/setup-awscli.html">these instructions</a>.</li>
<li>You will need <strong>Git</strong> installed locally. If not, you can install as <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">described here</a>.</li>
<li>You will need the <strong>.NET Core CLI</strong> installed. If not, install as described in   <a href="https://www.microsoft.com/net/download">these instructions</a>.</li>
</ol>
<h2 id="create-an-iam-role-for-your-lambda-function">Create an IAM Role for your Lambda Function</h2>
<blockquote>
<p>In this section we will create an IAM Role in your AWS Account for the Lambda Function. This is the permission that the lambda function can do when it assumes this role. Learn more about Lambda role <a href="https://docs.aws.amazon.com/lambda/latest/dg/intro-permission-model.html#lambda-intro-execution-role">here.</a></p>
</blockquote>
<ol>
  <li><a href="https://console.aws.amazon.com/">Log in</a> to your AWS Account and go to IAM Console.</li>
  <li>Go to <b>Role</b> and click <b>Create Role</b>. Select <i>AWS Service</i> for Type of trusted entity then slect <i>Lambda</i> as the service that will use this role. Click <b>Next: Permission</b></li>
  <li>Filter and Select <i>AWSLambdaBasicExecutionRole</i> and click <b>Next: Tags</b></li>
  <li>Click <b>Next: Review</b> and name the Role. Review the configuration and click <b>Create Role</b></li>
</ol>

<p><img alt="alt text" src="../images/lambda/vsts29.png" title="Lambda Role" /></p>
<h2 id="create-azure-devops-project">Create Azure DevOps project</h2>
<blockquote>
<p>In this section we will create an Azure DevOps project and clone the repo to your local working environment.</p>
</blockquote>
<ol start="1">
<li><a href="https://app.vssps.visualstudio.com">Log in</a> to your Azure DevOps account and create a project. It takes some time to complete.</li>
</ol>

<p><img src="../images/lambda/vsts1.png"> </p>
<ol start="2">
<li>Create a Personal Access Token.</li>
  <ol start="a">
      <li>Click on <b>your avatar</b> in the top-right of the screen and then click <b>Security</b>.</li>
      <li>Under the Personal Access Tokens section, click <b>New Token</b>.</li>
      <li>Enter a value in the Name field, select <i>Full Access</i> under Scope, and click <b>Create.</b></li>
      <li>Copy <i>the token</i> to a temporary storage location and click <b>Close</b>.</li>
  </ol>
<li>Create AWS service connection for this project.</li>
    <ol start="a">
      <li>On your Summary page on the project, click <b>Project settings</b> on the bottom left menu bar</li>
      <li>Click <b>Service connection</b> under Pipelines then click <b>+</b> New service connection.</li>
      <li>Enter <i>Access Key ID</i> and <i>Secret Access Key</i> of your IAM user.</li>
    </ol>
</ol>

<p><img alt="alt text" src="../images/lambda/vsts21.png" title="VSTS Project" /></p>
<p><img alt="alt text" src="../images/lambda/vsts22.png" title="VSTS Project" /></p>
<p>For more information see this <a href="https://docs.aws.amazon.com/vsts/latest/userguide/getting-started.html#set-up-aws-credentials-for-the-aws-tools-for-vsts">instruction</a> to Add AWS service connection for this project.</p>
<ol start="4">
<li>Click in the project and select Repos. Copy Git repo address.</li>
</ol>

<p><img alt="alt text" src="../images/lambda/vsts2.png" title="Git Repo" /></p>
<p>Select <em>Add ReadMe file</em> and add <em>gitignore</em> for VisualStudio.  Click <em>Initialize</em>.</p>
<p>On you command line type the command below to clone your newly created code repository to your local machine. Enter your Azure DevOps username and use your Personal Access Token as the password. use git repo you copied in step 4 in the git clone command.</p>
<div class="codehilite"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="err">:</span><span class="p">//{</span><span class="n">git</span> <span class="n">repo</span> <span class="n">account</span><span class="p">}</span><span class="nv">@dev</span><span class="p">.</span><span class="n">azure</span><span class="p">.</span><span class="n">com</span><span class="p">/{</span><span class="n">git</span> <span class="n">repo</span> <span class="n">account</span><span class="p">}/</span><span class="n">ReInventLambda</span><span class="p">/</span><span class="n">_git</span><span class="p">/</span><span class="n">ReInventLambda</span>
</pre></div>


<h2 id="create-a-simple-lambda-project">Create a simple Lambda project</h2>
<blockquote>
<p>In this session, we will create a simple dotnet Lambda project using donet CLI and push it to Azure DevOps git repository.</p>
</blockquote>
<ol start="1">
<li>Install AWS Lambda template.</li>
</ol>

<div class="codehilite"><pre><span></span><span class="go">dotnet new -i Amazon.Lambda.Templates</span>
</pre></div>


<p>Once the install is complete, verify if the Lambda templates are listed.</p>
<div class="codehilite"><pre><span></span><span class="go">dotnet new -all</span>
</pre></div>


<p><img alt="alt text" src="../images/lambda/vsts3.png" title="Dotnet new" /></p>
<ol start="2">
<li>Create a new Lambda project. Name function name <b>ReInventLambda</b>, choose your AWS profile and AWS region.</li>
</ol>

<div class="codehilite"><pre><span></span><span class="go">dotnet new lambda.EmptyFunction --name ReInventLambda --profile default --region us-west-2</span>
</pre></div>


<ol start="4">
<li>Browse into the folder. Examine the folder structure.</li>
</ol>

<div class="codehilite"><pre><span></span><span class="go">cd ReInventLambda</span>
</pre></div>


<ol start="3">
<li>Use your favorite text editor to open ..\ReInventLambda\src\ReInventLambda\aws-lambda-tools-defaults.json and resave it as UTF-8 (with no BOM) encoding. In this example, we use Visual Studio Code.</li>
</ol>

<p><img alt="alt text" src="../images/lambda/vsts30.png" title="VS Code" /></p>
<ol start="4">
<li>Commit the new code to local and remote (Azure DevOps) repository.</li>
</ol>

<div class="codehilite"><pre><span></span>git add *
git commit -m &quot;Lambda empty function first commit&quot;
git push
</pre></div>


<ol start="4">
<li>In Azure DevOps, examine your repo.</li>
</ol>

<h2 id="create-build-pipeline">Create Build pipeline</h2>
<blockquote>
<p>In this section, we will configure Build Pipeline using AWS Lambda.NET Core Deployment task. We will output the artifact to Azure DevOps.</p>
</blockquote>
<ol start="1">
<li>Select <b>Pipelines, Builds</b>, hit <b>+</b> button and select <b>New build pipeline</b>.</li>
<li>Click Use the <b>visual designer</b>.</li>
<li>Select <b>Source, Team project, Repository and branch</b>. Click <b>Continue</b>.</li>
  <ul>
    <li><b>Select a source: </b>Azure Repos Git</li>  
    <li><b>Team project: </b>ReInventLambda</li>
    <li><b>Repository: </b>ReInventLambda</li>
    <li><b>Default branch for manual and scheduled builds: </b>master</li>
  </ul>
<li>Select start with an Empty job by clicking <b>Empty job</b>.</li>  
</ol>

<p><img alt="img" src="../images/lambda/vsts11.png" /></p>
<ol start="5">
<li>Under Tasks, Pipeline, name the Build pipeline and select <b>Hosted VS2017</b> as Agent pool.</li>  
<li>Under Agent job 1, name Agent job and select <b>inherit from pipeline</b> for Agent pool.</li>
<li>Click <b>+</b> button at Agent job 1 task, to Add a task. In the search box, enter <i>PowerShell</i>. Add <b>PowerShell Task</b>.</li>
<ul>
    <li><b>Display name: </b>Install Amazon.Lambda.Tools</li>
    <li><b>Type: </b>Inline</li>
    <li><b>Scripts: </b>Enter the script bellowed.</li>
</ul>
</ol>

<div class="codehilite"><pre><span></span><span class="n">Write</span><span class="o">-</span><span class="n">Host</span> <span class="err">&#39;</span><span class="n">Installing</span> <span class="p">.</span><span class="n">NET</span> <span class="n">Global</span> <span class="n">Tool</span> <span class="n">Amazon</span><span class="p">.</span><span class="n">Lambda</span><span class="p">.</span><span class="n">Tools</span><span class="err">&#39;</span>
<span class="n">Write</span><span class="o">-</span><span class="n">Host</span> <span class="s">&quot;dotnet tool install Amazon.Lambda.Tools --tool-path C:\Program Files\dotnet</span><span class="se">\t</span><span class="s">ools&quot;</span>


<span class="cp"># Using stream redirection to force hide all output from the dotnet cli call</span>
<span class="o">&amp;</span> <span class="n">dotnet</span> <span class="n">tool</span> <span class="n">install</span> <span class="n">Amazon</span><span class="p">.</span><span class="n">Lambda</span><span class="p">.</span><span class="n">Tools</span> <span class="o">--</span><span class="n">tool</span><span class="o">-</span><span class="n">path</span> <span class="s">&quot;C:\Program Files\dotnet</span><span class="se">\t</span><span class="s">ools&quot;</span> <span class="o">*&gt;&amp;</span><span class="mi">1</span> <span class="o">|</span> <span class="n">Out</span><span class="o">-</span><span class="n">Null</span>

<span class="k">if</span> <span class="p">(</span><span class="err">$</span><span class="n">LASTEXITCODE</span> <span class="o">-</span><span class="n">ne</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">{</span>
        <span class="n">Write</span><span class="o">-</span><span class="n">Verbose</span> <span class="o">-</span><span class="n">Message</span> <span class="err">&#39;</span><span class="n">Error</span> <span class="n">installing</span><span class="p">,</span> <span class="n">attempting</span> <span class="n">to</span> <span class="n">update</span> <span class="n">Amazon</span><span class="p">.</span><span class="n">Lambda</span><span class="p">.</span><span class="n">Tools</span><span class="err">&#39;</span>

        <span class="cp"># When &quot;-Verbose&quot; switch was used this output was not hidden.</span>
        <span class="cp"># Using stream redirection to force hide all output from the dotnet cli call</span>
        <span class="o">&amp;</span> <span class="n">dotnet</span> <span class="n">tool</span> <span class="n">update</span> <span class="n">Amazon</span><span class="p">.</span><span class="n">Lambda</span><span class="p">.</span><span class="n">Tools</span> <span class="o">--</span><span class="n">tool</span><span class="o">-</span><span class="n">path</span> <span class="s">&quot;C:\Program Files\dotnet</span><span class="se">\t</span><span class="s">ools&quot;</span> <span class="o">*&gt;&amp;</span><span class="mi">1</span> <span class="o">|</span> <span class="n">Out</span><span class="o">-</span><span class="n">Null</span>

<span class="k">if</span> <span class="p">(</span><span class="err">$</span><span class="n">LASTEXITCODE</span> <span class="o">-</span><span class="n">ne</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">{</span>
            <span class="err">$</span><span class="n">msg</span> <span class="o">=</span> <span class="s">@&quot;</span>
<span class="n">Error</span> <span class="n">configuring</span> <span class="p">.</span><span class="n">NET</span> <span class="n">CLI</span> <span class="n">AWS</span> <span class="n">Lambda</span> <span class="n">deployment</span> <span class="nl">tools</span><span class="p">:</span> <span class="err">$</span><span class="n">LastExitCode</span>
<span class="nl">CALLSTACK</span><span class="p">:</span><span class="err">$</span><span class="p">(</span><span class="n">Get</span><span class="o">-</span><span class="n">PSCallStack</span> <span class="o">|</span> <span class="n">Out</span><span class="o">-</span><span class="n">String</span><span class="p">)</span>
<span class="s">&quot;@</span>
            <span class="n">throw</span> <span class="err">$</span><span class="n">msg</span>
<span class="p">}</span>
<span class="p">}</span>

<span class="n">Write</span><span class="o">-</span><span class="n">Host</span> <span class="s">&quot;Confirm if the tool is intalled&quot;</span>

<span class="n">get</span><span class="o">-</span><span class="n">childitem</span> <span class="s">&quot;C:\Program Files\dotnet</span><span class="se">\t</span><span class="s">ools&quot;</span>

<span class="n">Write</span><span class="o">-</span><span class="n">Host</span> <span class="s">&quot;Add path to AWS tool to env variable.&quot;</span>

<span class="err">$</span><span class="nl">env</span><span class="p">:</span><span class="n">Path</span> <span class="o">+=</span> <span class="s">&quot;;C:\Program Files\dotnet</span><span class="se">\t</span><span class="s">ools&quot;</span>

<span class="n">Write</span><span class="o">-</span><span class="n">Host</span> <span class="s">&quot;PATH variable is &quot;</span>
<span class="err">$</span><span class="nl">env</span><span class="p">:</span><span class="n">Path</span>

<span class="n">Write</span><span class="o">-</span><span class="n">Host</span> <span class="s">&quot;##vso[task.setvariable variable=PATH;]${env:PATH};$env:Path&quot;</span><span class="p">;</span>
</pre></div>


<p><img alt="img" src="../images/lambda/vsts28.png" /></p>
<p>This task is necessary if you are using the new .NET Core Global tool (.NET Core SDK 2.1.300 and later versions). With this change, the csproj file no longer include DotNetCliToolReference (see below). That means dotnet restore will not automatically download the tool during the build time. This task downloads and saves the tool in the specified location. The tool will be referenced in the next step.</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;ItemGroup&gt;</span>
   <span class="nt">&lt;DotNetCliToolReference</span> <span class="na">Include=</span><span class="s">&quot;Amazon.Lambda.Tools&quot;</span> <span class="na">Version=</span><span class="s">&quot;2.2.0&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/ItemGroup&gt;</span>
</pre></div>


<ol start="8">
<li>Click <b>+</b> button at Agent job 1 task to add a task. In the search box, enter <i>aws</i>. This should filter only AWS related tasks. Select <b>AWS Lambda.NET Core Deployment</b> then click <b>Add</b>.</li>
</ol>

<ol start="9">
<li>Configure Deploy.NET Core to Lambda task.</li>
  <ul>
    <li><b>Display name: </b>Deploy .NET Core to Lambda</li>
    <li><b>AWS Credentials: </b>AWS Note: AWS Credential was created in prerequisites section.</li>
    <li><b>Region: </b>Select AWS Region where you wanted your Lambda function to reside.</li>
    <li><b>Deployment Type: </b>Function</li>
    <li>Check <b>Create deployment package only</b></li>
    <li><b>Package-only output file: </b>$(Build.ArtifactStagingDirectory)\ReInventLambda.zip</li>
    <li><b>Path to Lambda Project: </b>browse to the directory containing the Lambda Project file</li>
  </ul>
</ol>

<p>Do not need to fill Lambda Function Properties, Advanced, Control Options and Output Variables.  </p>
<p><img alt="img" src="../images/lambda/vsts27.png" /></p>
<ol start="10">
<li>Click <b>+</b> to add a task. Select <b>Publish build Artifacts</b> and click <b>Add</b>. Configure task as seen below.</li>
  <ul>
    <li><b>Display name: </b>Publish Artifact: PackagedLambdaFunction</li>
    <li><b>Path to publish: </b>$(Build.ArtifactStagingDirectory)\ReInventLambda.zip Note: this is Package-only output file from the previous step</li>
    <li><b>Artifacts name: </b>PackagedLambdaFunction</li>
    <li><b>Artifact publish location: </b>Azure Pipelines/TFS</li>
  </ul>  
</ol>

<p><img alt="img" src="../images/lambda/vsts26.png" /></p>
<p>Select <strong>Save &amp; queue</strong>.</p>
<ol start="11">
<li>Examine Build logs.
</ol>

<p><img alt="img" src="../images/lambda/vsts25.png" /></p>
<ol start="12">
<li>If you face this error, use your favorite text editor to re-save aws-lambda-tools-defaults.json with UTF-8 with no BOM file encoding.</li>
</ol>

<p><img alt="img" src="../images/lambda/vsts24.png" /></p>
<h2 id="create-release-pipeline">Create Release pipeline</h2>
<blockquote>
<p>In this section, we will use AWS Lambda Deploy Function task to deploy the output build artifact from the last section to AWS Lambda function.</p>
</blockquote>
<ol start="1">
<li>Select <b>Pipelines, Releases and New Release pipeline</b>. In the New release pipeline, select <b>start with an Empty job</b>.</li>
<li>To add the artifact to the release pipeline, click <b>Add an Artifact</b> and configure as followed:</li>
  <ul>
    <li><b>Source type: </b>Build</li>
    <li><b>Project: </b>ReinventLambda</li>
    <li><b>Source (Build Pipeline): </b>ReinventLambda-CI</li>
    <li><b>Default version: </b>Latest</li>
    <li><b>Source alias: </b>_ReinventLambda-CI</li>
  </ul>  
</ol>

<p>Click <strong>Add</strong>.  </p>
<p><img alt="img" src="../images/lambda/vsts15.png" /></p>
<ol start="3">
<li>Click <b>Stage</b> and name the stage.</li>
<li>Click <b>1 job, 0 task</b> to view task. </li>
<li>At Agent job, click <b>+</b> to add a task. In the search box, type AWS. Select AWS Lambda Deploy Function and click Add.</li>
</ol>

<p><img alt="img" src="../images/lambda/vsts16.png" /></p>
<ol start="6">
<li>Configure Deploy Lambda Function task.</li>
  <ul>
    <li><b>Display name: </b>Deploy Lambda Function: ReInventLambda</li>
    <li><b>AWS Credentails: </b>AWS Note: AWS Credential was created in prerequisites section.</li>
    <li><b>Region: </b>Select the same AWS Region as in the previous step.</li>
    <li><b>Deployment Mode: </b>Update code and configuration (or create a new funtion).</li>
    <li><b>Function name: </b>ReInventLambda</li>
    <li><b>Function Handler: </b>ReInventLambda::ReInventLambda.Function::FunctionHandler</li>
    <li><b>Runtime: </b>dotnetcore2.1</li>
    <li><b>Code Location: </b>Zip file in the work area</li>
    <li><b>Zip File Path: </b>$(System.DefaultWorkingDirectory)/_ReInventLambda-CI/PackagedLambdaFunction/ReInventLambda.zip </li>
    <li><b>Role ARN or Name: </b>Lambda-ServiceRole-BasicExecution  Note: This is the Lambda service role created in Prerquisite section.</li>
    <li><b>Memory Size: </b>256</li>
    <li><b>Timeout: </b>30</li>
    <li>Check <b>Publish </b></li>
  </ul>  
</ol>

<p>Leave everything else as default in other sections. Click <strong>Save</strong> (at the top) to save the pipeline.</p>
<p><img alt="img" src="../images/lambda/vsts17.png" /></p>
<ol start="7">
<li>At the top, click <b>Release</b> and select <b>Create a release</b>. Review the release and click <b>Create</b>.</li>
<li>Select the release to view its status.</li>
</ol>

<p><img alt="img" src="../images/lambda/vsts19.png" /></p>
<ol start="9">
<li>Log in to AWS Lambda console to view the Function.</li>
</ol>

<h2 id="testing-the-function-using-net-cli">Testing the function using .net CLI</h2>
<blockquote>
<p>In this section, we will use dotnet CLI to test our newly created Lambda Funtion</p>
</blockquote>
<p>Install dotnet Lambda Tools and test the function.</p>
<div class="codehilite"><pre><span></span><span class="go">dotnet tool install -g Amazon.Lambda.Tools</span>
<span class="go">dotnet lambda invoke-function ReInventLambda --payload &quot;Just checking&quot;</span>
</pre></div>


<p><img alt="img" src="../images/lambda/vsts20.png" /></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../ec2/" title="Amazon EC2" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Amazon EC2
              </span>
            </div>
          </a>
        
        
          <a href="../fargate/" title="Amazon ECS Fargate" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Amazon ECS Fargate
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            &copy; 2019, Amazon Web Services, Inc. or its affiliates. All rights reserved.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../../assets/fonts/font-awesome.css">
    
      <a href="https://awsentworkshops.com" class="md-footer-social__link fa fa-home"></a>
    
      <a href="https://aws.amazon.com/windows/" class="md-footer-social__link fa fa-globe"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.dc02f8ce.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script>
      
        <script src="../../../javascripts/extra.js"></script>
      
    
  </body>
</html>